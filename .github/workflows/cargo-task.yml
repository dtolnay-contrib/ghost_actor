name: test

on: [ push ]

jobs:

 test:
  runs-on: ${{ matrix.os }}
  strategy:
   matrix:
    os: [
     ubuntu-latest,
     macos-latest,
     windows-latest,
    ]
    toolchain: [
     stable,
     #beta,
     #nightly,
    ]
  steps:
   - uses: actions/checkout@v2

   - uses: actions-rs/toolchain@v1
     with:
       toolchain: ${{ matrix.toolchain }}

   # install cargo-task
   - uses: actions-rs/cargo@v1
     with:
      command: install
      args: cargo-task

   # run all the tests
   - uses: actions-rs/cargo@v1
     with:
       command: task
